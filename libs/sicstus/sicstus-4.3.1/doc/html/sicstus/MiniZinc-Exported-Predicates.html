<html lang="en">
<head>
<title>MiniZinc Exported Predicates - SICStus Prolog</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="SICStus Prolog">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="MiniZinc.html#MiniZinc" title="MiniZinc">
<link rel="prev" href="MiniZinc-Prerequisites.html#MiniZinc-Prerequisites" title="MiniZinc Prerequisites">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
<link href="texinfo.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="node">
<a name="MiniZinc-Exported-Predicates"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="MiniZinc-Prerequisites.html#MiniZinc-Prerequisites">MiniZinc Prerequisites</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="MiniZinc.html#MiniZinc">MiniZinc</a>
<hr>
</div>

<h5 class="subsubsection">10.46.3.2 Exported Predicates</h5>

<p>The following predicates all take as (optional) argument a list
<var>Options</var> which can be used to change the default behavior of the
execution. This list may contain zero or more of the following:

     <dl>
<dt><code>data_file(</code><var>MznDatFile</var><code>)</code><dd><a name="index-data_005ffile_002f1-_0028zinc-option_0029-4264"></a>where <var>MznDatFile</var> must be a MiniZinc<!-- /@w --> data file. Means that
<var>MznDatFile</var> is passed to the MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator
through the <samp><span class="option">--data</span></samp> option.

     <br><dt><code>parameters(</code><var>ListOfParDef</var><code>)</code><dd><a name="index-parameters_002f1-_0028zinc-option_0029-4265"></a>where <var>ListOfParDef</var> is a list of elements of the form
<var>Id</var>=<var>Value</var> where <var>Id</var> is a MiniZinc<!-- /@w --> identifier and
<var>Value</var> is a MiniZinc<!-- /@w --> representation. Means that all elements are written to
a temporary file which is passed to the MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator
through the <samp><span class="option">--data</span></samp> option.

     <br><dt><code>post(</code><var>Boolean</var><code>)</code><dd><a name="index-post_002f1-_0028zinc-option_0029-4266"></a>where <var>Boolean</var> must be <code>true</code> or <code>false</code>. If <code>true</code>
(the default), the constraints of the MiniZinc<!-- /@w --> program are posted
directly and a separate call to <code>fzn_post/1</code> (see <a href="FlatZinc-Exported-Predicates.html#FlatZinc-Exported-Predicates">FlatZinc Exported Predicates</a>) is not necessary. (Only usable with
<code>mzn_load_file/3</code> and <code>mzn_load_model/3</code>.)

     <br><dt><code>search(</code><var>Method</var><code>) &nbsp;<!-- /@w --> </code><strong>since release 4.3</strong><dd><a name="index-search_002f1-_0028zinc-option_0029-4267"></a>where <var>Method</var> must be one of the atoms <code>bab</code> and
<code>restart</code>. Tells the solver which optimization algorithm to use:
branch-and-bound (the default), or to restart the search each time a new
solution is found.  (Only usable with <code>mzn_run_file/2</code> and
<code>mzn_run_model/2</code>.)

     <br><dt><code>solutions(</code><var>NumberOfSolutions</var><code>)</code><dd><a name="index-solutions_002f1-_0028zinc-option_0029-4268"></a>where <var>NumberOfSolutions</var> must be an integer greater than zero or
the atom <code>all</code>. Describes the number of solutions to search for,
default is 1. (Only usable with <code>mzn_run_file/2</code> and
<code>mzn_run_model/2</code>.)

     <br><dt><code>output(</code><var>File</var><code>)</code><dd><a name="index-output_002f1-_0028zinc-option_0029-4269"></a>where <var>File</var> must be the name of a writable file. Causes any output
written on the current output stream to be directed to <var>File</var>. (Only
usable with <code>mzn_run_file/2</code> and <code>mzn_run_model/2</code>.)

     <br><dt><code>fzn_file(</code><var>File</var><code>) &nbsp;<!-- /@w --> </code><strong>since release 4.2.3</strong><dd><a name="index-fzn_005ffile_002f1-_0028zinc-option_0029-4270"></a>where <var>File</var> must be the name of a writable file. 
The translated FlatZinc<!-- /@w --> program will be written to the given file. 
Otherwise, a temporary file will be used and erased afterwards.

     <br><dt><code>ozn_file(</code><var>File</var><code>) &nbsp;<!-- /@w --> </code><strong>since release 4.2.3</strong><dd><a name="index-ozn_005ffile_002f1-_0028zinc-option_0029-4271"></a>where <var>File</var> must be the name of a writable file.  The MiniZinc<!-- /@w -->
output commands will be written to the given file.  Otherwise, a
temporary file will be used and erased afterwards.

     <br><dt><code>optimise(</code><var>Boolean</var><code>) &nbsp;<!-- /@w --> </code><strong>since release 4.2.3</strong><dt><code>optimize(</code><var>Boolean</var><code>) &nbsp;<!-- /@w --> </code><strong>since release 4.2.3</strong><dd><a name="index-optimise_002f1-_0028zinc-option_0029-4272"></a><a name="index-optimize_002f1-_0028zinc-option_0029-4273"></a>where <var>Boolean</var> must be <code>true</code> (the default) or <code>false</code>. If
<code>false</code>, <samp><span class="option">--no-optimise</span></samp> is passed to <samp><span class="command">mzn2fzn</span></samp>.

     <br><dt><code>statistics(</code><var>Boolean</var><code>)</code><dd><a name="index-statistics_002f1-_0028zinc-option_0029-4274"></a>where <var>Boolean</var> must be <code>true</code> or <code>false</code> (default). If
<code>true</code>, the following statistics are written on the current output
stream (see the built-in <code>statistics/[0,2]</code> and
<code>fd_statistics/[0,2]</code> of <code>library(clpfd)</code> for more detailed
information on their meaning):
          <dl>
<dt><code>runtime</code><dd><a name="index-runtime-_0028zinc-option-value_0029-4275"></a>Total running time (milliseconds), including parsing the FlatZinc<!-- /@w -->
program.

          <br><dt><code>solvetime</code><dd><a name="index-solvetime-_0028zinc-option-value_0029-4276"></a>Running time (milliseconds) for posting the constraints and performing
the search.

          <br><dt><code>solutions</code><dd><a name="index-solutions-_0028zinc-option-value_0029-4277"></a>The number of solutions found.

          <br><dt><code>constraints</code><dd><a name="index-constraints-_0028zinc-option-value_0029-4278"></a>The number of constraints created.

          <br><dt><code>backtracks</code><dd><a name="index-backtracks-_0028zinc-option-value_0029-4279"></a>The number of times a contradiction was found by a domain being wiped
out, or by a global constraint signalling failure.

          <br><dt><code>prunings</code><dd><a name="index-prunings-_0028zinc-option-value_0029-4280"></a>The number of times a domain was pruned. 
</dl>
     (Only usable with <code>mzn_run_file/2</code> and <code>mzn_run_model/2</code>.)

     <br><dt><code>timeout(</code><var>Time</var><code>)</code><dd><a name="index-timeout_002f1-_0028zinc-option_0029-4281"></a>where <var>Time</var> must be an integer between (not including) 0 and
2147483647. Stops the computation if it has not finished before
<var>Time</var> milliseconds has elapsed. Measuring starts after the call to
the MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator has finished. (Only usable
with <code>mzn_run_file/2</code> and <code>mzn_run_model/2</code>.)

     <br><dt><code>variables(</code><var>ListOfVarDef</var><code>)</code><dd><a name="index-variables_002f1-_0028zinc-option_0029-4282"></a>where <var>ListOfVarDef</var> is a list of elements of the form
<var>Id</var>=<var>Var</var> where <var>Id</var> is a MiniZinc<!-- /@w --> identifier and <var>Var</var>
is a Prolog variable. Means that <var>Var</var> is unified with the representation of
<var>Id</var> after the MiniZinc<!-- /@w --> program is loaded. (Only usable with
<code>mzn_load_file/3</code> and <code>mzn_load_model/3</code>).

   </dl>

   <p>The first two predicates can be used to run a MiniZinc<!-- /@w --> program in one
go.

     <dl>
<dt><code>mzn_run_file(</code><var>+MznFile</var><code>)</code><dt><code>mzn_run_file(</code><var>+MznFile</var><code>, </code><var>+Options</var><code>)</code><dd><a name="index-mzn_005frun_005ffile_002f_005b1_002c2_005d-_0028zinc_0029-4283"></a><a name="index-mzn_005frun_005ffile_002f_005b1_002c2_005d-_0028zinc_0029-4284"></a>
<var>MznFile</var> is a MiniZinc<!-- /@w --> program file and <var>Options</var> is a list
of options as described above.  Runs the MiniZinc<!-- /@w --> program on
<var>MznFile</var>, and writes the result onto the file given in the
<code>option/1</code> option if given, or onto the current output stream
otherwise. This is done by first calling the external
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator, and then interpreting the output
of that program with <code>fzn_run_stream/[1,2]</code> (see <a href="FlatZinc-Exported-Predicates.html#FlatZinc-Exported-Predicates">FlatZinc Exported Predicates</a>). Fails if the constraints of the MiniZinc<!-- /@w -->
program are inconsistent.

     <p><em>Exceptions:</em>
          <ul>
<li>Exceptions related to the opening of <var>MznFile</var> for reading.

          <li>A <em>system error</em> if the external MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator is
not successful. This error will include any information produced by the
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator on its standard error stream.

          <li>A <em>type error</em> if the number of solutions to search for is not
greater than zero nor the atom <code>all</code>.

          <li>Exceptions regarding errors in <var>MznFile</var> (see <a href="Zinc-Errors.html#Zinc-Errors">Zinc Errors</a>)
although these are most probably already handled by the external
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator.

     </ul>

     <br><dt><code>mzn_run_model(</code><var>+MznModel</var><code>)</code><dt><code>mzn_run_model(</code><var>+MznModel</var><code>, </code><var>+Options</var><code>)</code><dd><a name="index-mzn_005frun_005fmodel_002f_005b1_002c2_005d-_0028zinc_0029-4285"></a><a name="index-mzn_005frun_005fmodel_002f_005b1_002c2_005d-_0028zinc_0029-4286"></a>
<var>MznModel</var> is a MiniZinc<!-- /@w --> program specified by a list of strings
as explained below and <var>Options</var> is a list of options as described
above.  Runs the MiniZinc<!-- /@w --> program <var>MznModel</var>, and writes the
result onto the file given in the <code>option/1</code> option if given, or
onto the current output stream otherwise.  This is done by first calling
the external MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator and interpreting the
output of that program with <code>fzn_run_stream/[1,2]</code> (see <a href="FlatZinc-Exported-Predicates.html#FlatZinc-Exported-Predicates">FlatZinc Exported Predicates</a>).  The MiniZinc<!-- /@w --> program specification
<var>MznModel</var> must be a list of strings (list of character codes) where
each element must specify one line of the MiniZinc<!-- /@w --> program. For
example, a MiniZinc<!-- /@w --> program for the N Queens problem can be specified
as follows:
     <pre class="example">          NQueens = ["int: n;",
                     "array [1..n] of var 1..n: q;",
                     "constraint forall (i in 1..n, j in i+1..n)",
                         "(q[i] != q[j] /\\",
                          "q[i] + i != q[j] + j /\\",
                          "q[i] - i != q[j] - j);",
                     "solve satisfy;",
                     "output [\"A solution to the \", show(n),",
                     "\" Queens problem: \", show(q), \"\\n\"];"]
</pre>
     <p><strong>Note that</strong> backslashes and double quotes must be escaped with an
additional backslash.

     <p><em>Exceptions:</em>
          <ul>
<li>A <em>system error</em> if the external MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator is
not successful. This error will include any information produced by the
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator on its standard error stream.

          <li>A <em>type error</em> if the number of solutions to search for is not
greater than zero nor the atom <code>all</code>.

          <li>Exceptions regarding errors in <var>MznModel</var> (see <a href="Zinc-Errors.html#Zinc-Errors">Zinc Errors</a>)
although these are most probably already handled by the external
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator.

     </ul>

   </dl>

   <p>Consider the following MiniZinc<!-- /@w --> program for solving the N Queens problem
located in <code>library('zinc/examples/queen.mzn')</code>:
<pre class="example">
                                  <div align="right"><em>queen.mzn</em>
     </div>
     int: n;
     
     array [1..n] of var 1..n: q;
     
     constraint
         forall (i in 1..n, j in i+1..n) (
             q[i] != q[j] /\
             q[i] + i != q[j] + j /\
             q[i] - i != q[j] - j
         );
     
     solve satisfy;
     
     output ["A solution to the ", show(n), " Queens problem: ", show(q), "\n"];
</pre>
   <p>Consider now the following goal at the Prolog top level:

<pre class="example">     | ?- <kbd>mzn_run_file(library('zinc/examples/queen'),</kbd>
                       <kbd>[data_file(library('zinc/examples/queen4.dat'))]).</kbd>
</pre>
   <p>Since <code>library('zinc/examples/queen4.dat')</code> contains the single
line
<pre class="example">     n = 4;
</pre>
   <p>the following is written on the current output stream:
<pre class="example">     A solution to the 4 Queens problem: [2, 4, 1, 3]
     ----------
</pre>
   <p>The initialization <code>n = 4</code> can also be passed using the
<code>parameter/1</code> option. So the following goal is equivalent to the
one above:
<pre class="example">     | ?- <kbd>mzn_run_file(library('zinc/examples/queen'), [parameters([n=4])]).</kbd>
</pre>
   <p>Finally, the following goal finds all solutions to the 4 Queens problem:
<pre class="example">     | ?- <kbd>mzn_run_file(library('zinc/examples/queen'),</kbd>
                       <kbd>[parameters([n=4]), solutions(all)]).</kbd>
</pre>
   <p>Given this goal, the following is written on the current output stream:
<pre class="example">     A solution to the 4 Queens problem: [2, 4, 1, 3]
     ----------
     A solution to the 4 Queens problem: [3, 1, 4, 2]
     ----------
     ==========
</pre>
   <p>The next two predicates can be used to construct a FlatZinc<!-- /@w --> state
(see <a href="FlatZinc-Exported-Predicates.html#FlatZinc-Exported-Predicates">FlatZinc Exported Predicates</a>).

     <dl>
<dt><code>mzn_load_file(</code><var>+MznFile</var><code>, </code><var>-FznState</var><code>)</code><dt><code>mzn_load_file(</code><var>+MznFile</var><code>, </code><var>+Options</var><code>, </code><var>-FznState</var><code>)</code><dd><a name="index-mzn_005fload_005ffile_002f_005b2_002c3_005d-_0028zinc_0029-4287"></a><a name="index-mzn_005fload_005ffile_002f_005b2_002c3_005d-_0028zinc_0029-4288"></a>
<var>MznFile</var> is a MiniZinc<!-- /@w --> program file and <var>Options</var> is a list
of options as described above. Initializes a FlatZinc<!-- /@w --> state
<var>FznState</var> with respect to <var>MznFile</var>. May fail if
<code>post(true)</code> and the constraints are inconsistent.

     <p><em>Exceptions:</em>
          <ul>
<li>Exceptions related to the opening of <var>MznFile</var> for reading.

          <li>A <em>system error</em> if the external MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator is
not successful. This error will include any information produced by the
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator on its standard error stream.

          <li>An <em>existence error</em> if an <var>Id</var> of the <code>variables/1</code>
option is not an identifier of <var>FznState</var>.

          <li>Exceptions regarding errors in <var>MznFile</var> (see <a href="Zinc-Errors.html#Zinc-Errors">Zinc Errors</a>)
although these are most probably already handled by the external
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator.

     </ul>

     <br><dt><code>mzn_load_model(</code><var>+MznModel</var><code>, </code><var>-FznState</var><code>)</code><dt><code>mzn_load_model(</code><var>+MznModel</var><code>, </code><var>+Options</var><code>, </code><var>-FznState</var><code>)</code><dd><a name="index-mzn_005fload_005ffile_002f_005b2_002c3_005d-_0028zinc_0029-4289"></a><a name="index-mzn_005fload_005ffile_002f_005b2_002c3_005d-_0028zinc_0029-4290"></a>
<var>MznModel</var> is a MiniZinc<!-- /@w --> program specified by a list of strings
as explained for <code>mzn_run_model/[1,2]</code> above and <var>Options</var> is a
list of options as described above.  Initializes a FlatZinc<!-- /@w --> state
<var>FznState</var> with respect to <var>MznModel</var>. May fail if
<code>post(true)</code> and the constraints are inconsistent.

     <p><em>Exceptions:</em>
          <ul>
<li>A <em>system error</em> if the external MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator is
not successful. This error will include any information produced by the
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator on its standard error stream.

          <li>An <em>existence error</em> if an <var>Id</var> of the <code>variables/1</code>
option is not an identifier of <var>FznState</var>.

          <li>Exceptions regarding errors in <var>MznModel</var> (see <a href="Zinc-Errors.html#Zinc-Errors">Zinc Errors</a>)
although these are most probably already handled by the external
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator.

     </ul>

   </dl>

   <p>The following Prolog goal constructs a FlatZinc<!-- /@w --> state representing the 4
Queens problem:
<pre class="example">     | ?- <kbd>mzn_load_file(library('zinc/examples/queen'),</kbd>
                        <kbd>[parameters([n=4])], Queen4State).</kbd>
</pre>
   <p>See <a href="FlatZinc-Exported-Predicates.html#FlatZinc-Exported-Predicates">FlatZinc Exported Predicates</a> for more information on FlatZinc<!-- /@w -->
states and how they can be queried. A very useful option to
<code>mzn_load_file/3</code> and <code>mzn_load_model/3</code> is the
<code>variables/1</code> option, which can be used to unify values of MiniZinc<!-- /@w -->
identifiers with Prolog variables (this option can be used in place of
several calls to <code>fzn_identifier/3</code>). For example, the following
goal posts an additional symmetry breaking constraint and labels the
variables using a Prolog goal that finds all remaining solutions to the
4 Queens problem:
<pre class="example">     | ?- <kbd>mzn_load_file(library('zinc/examples/queen'),</kbd>
                        <kbd>[parameters([n=4]), variables([q=Q])],</kbd>
                        <kbd>Queen4State),</kbd>
          <kbd>Q = [Q1, Q2|_], Q1 #&lt; Q2,</kbd>
          <kbd>findall(_, (labeling([], Q), fzn_output(Queen4State)), _).</kbd>
</pre>
   <p>Given this goal, the following is written on the current output stream:
<pre class="example">     q = array1d(1..4, [2, 4, 1, 3]);
     ----------
</pre>
   <p>The final predicate can be used to translate a MiniZinc<!-- /@w --> file to a
FlatZinc<!-- /@w --> by a direct call to the MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator.

     <dl>
<dt><code>mzn_to_fzn(</code><var>+MznFile</var><code>, </code><var>+FznFile</var><code>)</code><dt><code>mzn_to_fzn(</code><var>+MznFile</var><code>, </code><var>+Options</var><code>, </code><var>+FznFile</var><code>)</code><dd><a name="index-mzn_005fto_005ffzn_002f_005b2_002c3_005d-_0028zinc_0029-4291"></a><a name="index-mzn_005fto_005ffzn_002f_005b2_002c3_005d-_0028zinc_0029-4292"></a>
<var>MznFile</var> is a MiniZinc<!-- /@w --> program file and <var>Options</var> is a list
of options as described above. Calls the external
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator which result is written to
<var>FznFile</var>.

     <p><em>Exceptions:</em>
          <ul>
<li>Exceptions related to the opening of <var>MznFile</var> for reading as well
as the opening of <var>FznFile</var> for writing.

          <li>A <em>system error</em> if the external MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator is
not successful. This error will include any information produced by the
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator on its standard error stream.

          <li>Exceptions regarding errors in <var>MznFile</var> (see <a href="Zinc-Errors.html#Zinc-Errors">Zinc Errors</a>)
although these are most probably already handled by the external
MiniZinc<!-- /@w -->-to-FlatZinc<!-- /@w --> translator.

     </ul>

   </dl>

<ul class="menu">
<li><a accesskey="1" href="Zinc-Errors.html#Zinc-Errors">Zinc Errors</a>:  Zinc Errors
</ul>

<div class="logo">
<a href="http://sicstus.sics.se/">
<table><tr><td>&nbsp;</td></tr></table>
</a>
</div>
<div class="node">
<ul class="node">
<li><a href="index.html#Top">User's Manual</a>
<hr>
<li><a href="index.html#TOC">Table of Contents</a>
</ul>
</div>
<hr>
<a HREF="mailto:sicstus-support@sics.se?subject=Documentation%20feedback%20on%20html/sicstus/MiniZinc-Exported-Predicates.html&amp;body=Feedback%20on%20documentation%20node%20html/sicstus/MiniZinc-Exported-Predicates.html%20in%20User's%20Manual.">Send feedback on this subject.</a>
   </body></html>

