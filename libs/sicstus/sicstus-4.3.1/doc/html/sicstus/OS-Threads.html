<html lang="en">
<head>
<title>OS Threads - SICStus Prolog</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="SICStus Prolog">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Operating-System-Services.html#Operating-System-Services" title="Operating System Services">
<link rel="prev" href="OS-File-System.html#OS-File-System" title="OS File System">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
<link href="texinfo.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="node">
<a name="OS-Threads"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="OS-File-System.html#OS-File-System">OS File System</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Operating-System-Services.html#Operating-System-Services">Operating System Services</a>
<hr>
</div>

<h5 class="subsubsection">6.4.7.3 Threads</h5>

<!-- FIXME need a more thorough treatment of all things thread-y -->
<p>When running more that one SICStus runtime in the same process it is
often necessary to protect data with mutual exclusion locks. The
following functions implement recursive mutual exclusion locks, which only
need static initialization.

   <p><a name="index-threads-2296"></a><a name="index-mutex-2297"></a><a name="index-mutual-exclusion-locks-2298"></a><a name="index-locks_002c-mutual-exclusion-2299"></a>
<a name="index-SP_005fmutex_005funlock_0028_0029-_0028C-function_0029-2300"></a><a name="index-SP_005fMUTEX_005fINITIALIZER-_0028C-macro_0029-2301"></a>
     <dl>
<dt><code>SP_mutex_lock()</code><dd><a name="index-SP_005fmutex_005flock_0028_0029-_0028C-function_0029-2302"></a>Locks the mutex. 
<br><dt><code>SP_mutex_unlock()</code><dd><a name="index-SP_005fmutex_005funlock_0028_0029-_0028C-function_0029-2303"></a>Unlocks the mutex. 
</dl>

   <p>A (recursive) mutual exclusion lock is declared as type
<code>SP_mutex</code>. It should be initialized to (the static initializer)
<code>SP_MUTEX_INITIALIZER</code> before use.

   <p>Note that the SICStus runtime is not thread safe in general.

   <p><a name="index-SP_005fforeign_005fstash_0028_0029-_0028C-macro_0029-2304"></a>A dynamic foreign resource that is used by multiple SICStus
runtimes in the same process may need to maintain a global state that
is kept separate for each SICStus runtime. Each SICStus runtime
maintains a location (containing a <code>void*</code>) for each foreign
resource. By calling <code>SP_foreign_stash()</code>,
a foreign resource can then access this location to
store any data that is specific to the calling SICStus runtime.

<div class="logo">
<a href="http://sicstus.sics.se/">
<table><tr><td>&nbsp;</td></tr></table>
</a>
</div>
<div class="node">
<ul class="node">
<li><a href="index.html#Top">User's Manual</a>
<hr>
<li><a href="index.html#TOC">Table of Contents</a>
</ul>
</div>
<hr>
<a HREF="mailto:sicstus-support@sics.se?subject=Documentation%20feedback%20on%20html/sicstus/OS-Threads.html&amp;body=Feedback%20on%20documentation%20node%20html/sicstus/OS-Threads.html%20in%20User's%20Manual.">Send feedback on this subject.</a>
   </body></html>

